{% include head.html %}

<style type="text/css">
  & a {
    font-size: var(--font-tale-p);
  }

  & h2 {
    font-size: var(--font-tale-h2);
    text-align: center;
  }

  & p {
    font-size: var(--font-tale-p);
  }

  main {
    display: flex;
    flex-direction: column;
  }

  & div.link {
    border: 0.125rem var(--color-margin) solid;
    border-radius: 0.5rem;
    padding: 1.5rem 2rem;
    min-width: 14rem;

    display: flex;
    flex-direction: column;
    align-items: center;

    &:hover {
      background-color: var(--color-primary-pure);
      color: var(--color-text);
    }

    & a:hover {
      color: var(--color-text);
    }

    & h3 {
      font-size: var(--font-tale-h3);
    }

    & small {
      font-size: 80%;
    }

    &.disable {
      pointer-events: none;
      opacity: 0.4;
    }
  }

  main section.concept {
    width: 100%;

    position: relative;
    padding: 6rem var(--margin-content-x);
    background: var(--color-background);
    background: var(--gradient-hero);

    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 1.5rem;

    & div.title {
      z-index: 2;
      display: flex;
      flex-direction: column;

      width: 100%;

      & small {
        font-size: 1.5rem;
        font-weight: 300;
      }
    }

    & h2 {
      z-index: 2;
      width: 60%;
      text-align: left;

      @media (max-width: 980px) {
        width: 100%;
      }
    }

    & p {
      z-index: 2;
      width: 65%;

      @media (max-width: 980px) {
        width: 100%;
      }
    }

    & div.illustrator {
      z-index: 1;
      position: absolute;
      bottom: 0;
      right: calc(var(--margin-content-x) - 2rem);

      height: calc(100% + 6rem);
      max-width: 100%;
      overflow: hidden;

      @media (max-width: 980px) {
        right: 0;
        opacity: 0.5;
      }

      & img {
        height: 100%;
      }
    }
  }

  main section#sound {
    background: var(--gradient-sound);
    align-items: flex-end;

    & div.title {
      align-items: flex-end;
    }

    & h2 {
      text-align: right;
    }

    & small {
      text-align: right;
    }

    & p {
      text-align: right;
      width: 70%;

      @media (max-width: 980px) {
        width: 100%;
      }
    }

    & audio {
      z-index: 2;
    }

    & div.illustrator {
      left: calc(var(--margin-content-x) - 2rem);
    }
  }

  main section#tales {
    position: relative;
    padding: var(--margin-content-y) var(--margin-content-x) 12rem;

    display: flex;
    flex-direction: column;
    gap: 4rem;

    & div#collection {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 1.5rem;

      @media (max-width: 980px) {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      @media (max-width: 540px) {
        grid-template-columns: 1fr;
      }
    }

    & img {
      z-index: -1;
      position: absolute;
      bottom: 0;
      right: calc(var(--margin-content-x) - 2rem);

      @media (max-width: 980px) {
        opacity: 0.5;
      }
    }
  }

  main section#about {
    padding: var(--margin-content-y) var(--margin-content-x);

    display: flex;
    flex-direction: column;
    gap: 4rem;

    & div.pieces {
      display: grid;
      grid-template-columns: 1fr 1fr;
      align-items: center;
      gap: 4rem;

      @media (max-width: 980px) {
        grid-template-columns: 1fr;
      }

      & div.pages {
        display: flex;
        flex-direction: column;
        gap: 2rem;
      }
    }
  }

  main section#team {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    position: relative;
    padding: 7rem calc(var(--margin-content-x) + 6rem) 2.5rem;

    & img#photo {
      margin: 5rem;
      width: min(75%, 30rem);
      transform: var(--rotate-photo);
    }

    & img.leaf {
      position: absolute;
      width: min(25%, 15rem);

      &.one {
        bottom: 0;
        left: var(--margin-content-x);
        transform: rotate3d(-1, -1, 1, -60deg);
      }

      &.two {
        top: 3rem;
        right: calc(var(--margin-content-x) + 8rem);
        transform: scale(0.75) rotate3d(1, -1, 1, 60deg);
      }

      &.three {
        top: 55%;
        left: calc(var(--margin-content-x) + 6rem);
        transform: scale(0.8) rotate(-155deg) rotate3d(1, -1, 1, 60deg);
      }

      &.four {
        top: 28%;
        left: calc(var(--margin-content-x) - 6rem);
        transform: scale(0.65) rotate(-55deg) rotate3d(1, -1, 1, 60deg);
      }

      &.five {
        bottom: 12%;
        right: calc(var(--margin-content-x) + 2rem);
        transform: scale(0.95) rotate(215deg) rotate3d(-1, -1, 1, -60deg);
      }

      &.six {
        z-index: -1;
        top: 10%;
        left: 40%;
        transform: scale(0.7) rotate(27deg) rotate3d(1, -1, 1, 60deg);
        opacity: 0.75;
        filter: blur(0.25rem);
      }

      &.seven {
        z-index: -1;
        top: 50%;
        right: 18%;
        transform: scale(0.6) rotate(82deg) rotate3d(1, -1, 1, 60deg);
        opacity: 0.75;
        filter: blur(0.25rem);
      }

      &.eight {
        z-index: -1;
        top: 20%;
        left: 20%;
        transform: scale(0.7) rotate(82deg) rotate3d(1, -1, 1, 60deg);
        opacity: 0.75;
        filter: blur(0.25rem);
      }

      &.nine {
        z-index: -1;
        bottom: 10%;
        left: 40%;
        transform: scale(0.7) rotate(-30deg) rotate3d(1, -1, 1, 50deg);
        opacity: 0.75;
        filter: blur(0.25rem);
      }
    }

    @media (max-width: 980px) {
      padding-left: 0;
      padding-right: 0;
    }
  }
</style>

<body>
  {% include header.html %}

  <main id="home">
    <section id="hero" class="concept">
      <div class="illustrator">
        <img src="{{ site.baseurl }}/images/hero_image.png" alt="" />
      </div>

      <div class="title">
        <h2>A Wyld está em Perigo</h2>
        <small>e os Garou Lutam por Sua Última Chance</small>
      </div>
      <p>
        De policiais à margem da lei a guias comunitários traídos pelo sistema,
        de políticos corruptos a vocalistas que canalizam a fúria em gritos de
        revolta — estes são os últimos guardiões de Gaia. Em um mundo onde o
        Wyrm consome tudo, suas histórias são crônicas de sangue, glória e
        desespero. A Terra agoniza. Eles são a única resistência.
      </p>
    </section>

    <section id="tales">
      <h2>Crônicas</h2>
      <div id="collection">
        {% for post in site.posts %}

        <a href="{{ site.baseurl }}/{{ post.slug }}">
          <div class="link">
            <small>Capítulo {{ post.chapter }}</small>
            <h3>{{ post.title }}</h3>
          </div>
        </a>

        {% endfor %}
      </div>

      <img src="{{ site.baseurl }}/images/glowing_moon.png" alt="" />
    </section>

    <section id="sound" class="concept">
      <div class="illustrator">
        <img src="{{ site.baseurl }}/images/sound_image.png" alt="" />
      </div>

      <div class="title">
        <h2>Filhos de Gaia</h2>
        <small>Quando a Última Canção é um Grito de Guerra</small>
      </div>
      <p>
        Esta não é apenas uma música. É um chamado ancestral, um uivo ecoando
        nas ruínas de um mundo à beira do fim. "Filhos de Gaia" entoa a fúria
        dos Garou, a dor da Wyld ferida e a coragem dos que ainda lutam — mesmo
        quando a Wyrm parece vencer. Das florestas sagradas aos becos urbanos,
        suas notas carregam o sangue, a glória e a maldição de quem nasceu para
        morrer em batalha.
      </p>

      <audio controls>
        <source
          src="{{ site.baseurl }}/audios/filhos_de_gaia.mpeg"
          type="audio/mpeg"
        />
        Seu navegador não suporte player de áudio
      </audio>
    </section>

    <section id="about">
      <h2>Sobre</h2>

      <div class="pieces">
        <p>
          Nesta crônica sombria, você entrará no mundo dos Garou – guerreiros
          bestiais condenados a lutar pela balança entre a humanidade e a
          selvageria. Aqui, os lobisomens não são meras lendas: são os
          defensores de Gaia, enfrentando a corrupção do Wyrm e os horrores do
          Apocalipse que se aproxima.
        </p>

        <div class="pages">
          <div class="link disable">
            <h3>Personagens (breve)</h3>
          </div>

          <div class="link disable">
            <h3>Conceitos (breve)</h3>
          </div>
        </div>
      </div>
    </section>

    <section id="team">
      <img id="photo" src="{{ site.baseurl }}/images/poster_photo.png" alt="" />
      <img
        class="leaf one"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf two"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf three"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf four"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf five"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf six"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf seven"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf eight"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
      <img
        class="leaf nine"
        src="{{ site.baseurl }}/images/burnt_leaf.png"
        alt=""
      />
    </section>
  </main>

  {% include footer.html %}
</body>

<script>
  const leafTransforms = [
    { speed: 0.5, transform: "rotate3d(-1, -1, 1, -60deg)" },
    { speed: 0.4, transform: "scale(0.75) rotate3d(1, -1, 1, 60deg)" },
    {
      speed: 0.7,
      transform: "scale(0.8) rotate(-155deg) rotate3d(1, -1, 1, 60deg)",
    },
    {
      speed: 0.3,
      transform: "scale(0.65) rotate(-55deg) rotate3d(1, -1, 1, 60deg)",
    },
    {
      speed: 0.6,
      transform: "scale(0.95) rotate(215deg) rotate3d(-1, -1, 1, -60deg)",
    },
    {
      speed: 0.2,
      transform: "scale(0.7) rotate(27deg) rotate3d(1, -1, 1, 60deg)",
    },
    {
      speed: 0.4,
      transform: "scale(0.6) rotate(82deg) rotate3d(1, -1, 1, 60deg)",
    },
    {
      speed: 0.4,
      transform: "scale(0.7) rotate(82deg) rotate3d(1, -1, 1, 60deg)",
    },
    {
      speed: 0.4,
      transform: "scale(0.7) rotate(-30deg) rotate3d(1, -1, 1, 50deg)",
    },
  ];

  function isVisible(el) {
    const rect = el.getBoundingClientRect();
    const heightScreen =
      AbortSignal.innerHeight || document.documentElement.clientHeight;
    return rect.top <= heightScreen;
  }

  window.addEventListener("scroll", function () {
    const contentElement = document.getElementById("team");
    if (isVisible(contentElement)) {
      const backgroundElement = document.getElementById("photo");
      const foregroundElements = document.querySelectorAll(".leaf");
      const rect = contentElement.getBoundingClientRect();

      const top = rect.top * -0.2;
      backgroundElement.style.transform = `translateY(${top}px) var(--rotate-photo)`;

      foregroundElements.forEach((el, idx) => {
        const { speed, transform } = leafTransforms[idx];
        el.style.transform = `translateY(${rect.top * speed}px) ${transform}`;
      });
    }
  });
</script>
